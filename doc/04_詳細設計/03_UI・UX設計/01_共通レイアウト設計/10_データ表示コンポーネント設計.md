# データ表示コンポーネント設計

## 概要

SES業務システムにおける統一されたデータ表示コンポーネントの設計仕様です。Bootstrap 5.3.x、Alpine.js 3.x、Chart.js 4.xを基盤として、効率的なデータ閲覧とユーザビリティを重視したコンポーネントを定義します。

## 基本設計原則

### 1. 情報の可読性
- **階層的表示**: 重要度に応じた情報の構造化
- **適切な密度**: 画面サイズに応じた情報密度の調整
- **視覚的グループ化**: 関連する情報のまとまり

### 2. 操作の効率性
- **ソート・フィルター**: データの絞り込み・並び替え
- **一括操作**: 複数項目の同時操作
- **クイックアクション**: 頻繁な操作への素早いアクセス

### 3. レスポンシブ対応
- **適応的レイアウト**: デバイスサイズに応じた表示切り替え
- **最適化された操作**: タッチデバイスでの操作性
- **読み込みパフォーマンス**: 大量データの効率的表示

## データテーブルコンポーネント

### 1. 基本データテーブル

#### 1.1 標準テーブル
```html
<!-- 技術者一覧テーブル -->
<div class="table-container">
  <div class="table-responsive">
    <table class="table table-hover" id="engineersTable">
      <thead class="table-light">
        <tr>
          <th scope="col" style="width: 40px;">
            <input type="checkbox" 
                   class="form-check-input" 
                   id="selectAll"
                   aria-label="全て選択">
          </th>
          <th scope="col" class="sortable" data-sort="name">
            <button class="btn btn-link p-0 text-decoration-none d-flex align-items-center">
              技術者名
              <i class="bi bi-arrow-down-up ms-1 sort-icon"></i>
            </button>
          </th>
          <th scope="col" class="sortable d-none d-md-table-cell" data-sort="email">
            <button class="btn btn-link p-0 text-decoration-none d-flex align-items-center">
              メールアドレス
              <i class="bi bi-arrow-down-up ms-1 sort-icon"></i>
            </button>
          </th>
          <th scope="col" class="sortable" data-sort="status">
            <button class="btn btn-link p-0 text-decoration-none d-flex align-items-center">
              ステータス
              <i class="bi bi-arrow-down-up ms-1 sort-icon"></i>
            </button>
          </th>
          <th scope="col" class="sortable d-none d-lg-table-cell" data-sort="skills">
            スキル
          </th>
          <th scope="col" class="sortable d-none d-md-table-cell" data-sort="experience">
            <button class="btn btn-link p-0 text-decoration-none d-flex align-items-center">
              経験年数
              <i class="bi bi-arrow-down-up ms-1 sort-icon"></i>
            </button>
          </th>
          <th scope="col" class="sortable d-none d-md-table-cell" data-sort="updatedAt">
            <button class="btn btn-link p-0 text-decoration-none d-flex align-items-center">
              更新日
              <i class="bi bi-arrow-down-up ms-1 sort-icon"></i>
            </button>
          </th>
          <th scope="col" style="width: 120px;">操作</th>
        </tr>
      </thead>
      <tbody>
        <tr>
          <td>
            <input type="checkbox" 
                   class="form-check-input row-select" 
                   value="1"
                   aria-label="この行を選択">
          </td>
          <td>
            <div class="d-flex align-items-center">
              <img src="/images/avatars/user1.png" 
                   class="rounded-circle me-2" 
                   width="32" 
                   height="32"
                   alt="プロフィール画像"
                   loading="lazy">
              <div>
                <div class="fw-medium">田中 太郎</div>
                <small class="text-muted d-md-none">t.tanaka@example.com</small>
                <div class="d-lg-none">
                  <span class="badge bg-primary me-1">Java</span>
                  <span class="badge bg-secondary">Spring</span>
                </div>
              </div>
            </div>
          </td>
          <td class="d-none d-md-table-cell">
            <a href="mailto:t.tanaka@example.com" class="text-decoration-none">
              t.tanaka@example.com
            </a>
          </td>
          <td>
            <span class="badge bg-success">稼働可能</span>
          </td>
          <td class="d-none d-lg-table-cell">
            <div class="skill-tags">
              <span class="badge bg-primary me-1">Java</span>
              <span class="badge bg-secondary me-1">Spring</span>
              <span class="badge bg-info me-1">PostgreSQL</span>
              <span class="badge bg-warning text-dark">+2</span>
            </div>
          </td>
          <td class="d-none d-md-table-cell">
            <span class="fw-medium">5.5年</span>
          </td>
          <td class="d-none d-md-table-cell">
            <time datetime="2025-06-01" title="2025年6月1日 14:30">
              2025/06/01
            </time>
          </td>
          <td>
            <div class="btn-group btn-group-sm" role="group" aria-label="操作">
              <button type="button" 
                      class="btn btn-outline-primary" 
                      title="詳細表示"
                      aria-label="田中太郎の詳細を表示">
                <i class="bi bi-eye"></i>
                <span class="d-none d-sm-inline ms-1">詳細</span>
              </button>
              <button type="button" 
                      class="btn btn-outline-secondary" 
                      title="編集"
                      aria-label="田中太郎の情報を編集">
                <i class="bi bi-pencil"></i>
              </button>
              <div class="btn-group btn-group-sm" role="group">
                <button type="button" 
                        class="btn btn-outline-secondary dropdown-toggle dropdown-toggle-split" 
                        data-bs-toggle="dropdown" 
                        aria-expanded="false"
                        aria-label="その他の操作">
                  <span class="visually-hidden">その他</span>
                </button>
                <ul class="dropdown-menu">
                  <li>
                    <a class="dropdown-item" href="#">
                      <i class="bi bi-download me-2"></i>履歴書DL
                    </a>
                  </li>
                  <li>
                    <a class="dropdown-item" href="#">
                      <i class="bi bi-envelope me-2"></i>メール送信
                    </a>
                  </li>
                  <li><hr class="dropdown-divider"></li>
                  <li>
                    <a class="dropdown-item text-danger" href="#">
                      <i class="bi bi-trash me-2"></i>削除
                    </a>
                  </li>
                </ul>
              </div>
            </div>
          </td>
        </tr>
        <!-- 他の行... -->
      </tbody>
    </table>
  </div>
  
  <!-- テーブルフッター -->
  <div class="table-footer d-flex justify-content-between align-items-center mt-3">
    <div class="table-info">
      <small class="text-muted">
        全245件中 1-20件を表示
      </small>
    </div>
    <div class="table-pagination">
      <nav aria-label="技術者一覧ページネーション">
        <ul class="pagination pagination-sm mb-0">
          <li class="page-item disabled">
            <span class="page-link">前へ</span>
          </li>
          <li class="page-item active">
            <span class="page-link">1</span>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page=2">2</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page=3">3</a>
          </li>
          <li class="page-item">
            <a class="page-link" href="?page=2">次へ</a>
          </li>
        </ul>
      </nav>
    </div>
  </div>
</div>
```

#### 1.2 高機能データテーブル（Alpine.js）
```html
<!-- 高機能データテーブル -->
<div class="advanced-table" x-data="dataTable">
  <!-- テーブルツールバー -->
  <div class="table-toolbar bg-light p-3 rounded-top border">
    <div class="row align-items-center">
      <div class="col-md-6">
        <!-- 検索フィールド -->
        <div class="input-group">
          <span class="input-group-text">
            <i class="bi bi-search"></i>
          </span>
          <input type="text" 
                 class="form-control" 
                 placeholder="名前、スキル、メールアドレスで検索..."
                 x-model="searchQuery"
                 @input.debounce.300ms="search()">
          <button class="btn btn-outline-secondary" 
                  x-show="searchQuery"
                  @click="clearSearch()">
            <i class="bi bi-x"></i>
          </button>
        </div>
      </div>
      <div class="col-md-6">
        <div class="d-flex justify-content-end gap-2">
          <!-- 表示件数選択 -->
          <select class="form-select form-select-sm" 
                  style="width: auto;"
                  x-model="pageSize"
                  @change="changePageSize()">
            <option value="10">10件</option>
            <option value="25">25件</option>
            <option value="50">50件</option>
            <option value="100">100件</option>
          </select>
          
          <!-- エクスポートボタン -->
          <button class="btn btn-outline-primary btn-sm" 
                  @click="exportData()">
            <i class="bi bi-download me-1"></i>エクスポート
          </button>
          
          <!-- 列表示設定 -->
          <div class="btn-group" role="group">
            <button type="button" 
                    class="btn btn-outline-secondary btn-sm dropdown-toggle" 
                    data-bs-toggle="dropdown">
              <i class="bi bi-columns-gap me-1"></i>列表示
            </button>
            <ul class="dropdown-menu">
              <li class="dropdown-header">表示する列を選択</li>
              <template x-for="column in availableColumns" :key="column.key">
                <li>
                  <label class="dropdown-item">
                    <input type="checkbox" 
                           class="form-check-input me-2"
                           :checked="column.visible"
                           @change="toggleColumn(column.key)">
                    <span x-text="column.label"></span>
                  </label>
                </li>
              </template>
            </ul>
          </div>
        </div>
      </div>
    </div>
  </div>
  
  <!-- 一括操作バー -->
  <div class="bulk-actions-bar bg-primary text-white p-2" 
       x-show="selectedItems.length > 0"
       x-transition>
    <div class="d-flex justify-content-between align-items-center">
      <span x-text="`${selectedItems.length}件選択中`"></span>
      <div class="btn-group btn-group-sm">
        <button class="btn btn-light btn-sm" @click="bulkAction('export')">
          <i class="bi bi-download me-1"></i>一括エクスポート
        </button>
        <button class="btn btn-warning btn-sm" @click="bulkAction('status')">
          <i class="bi bi-pencil me-1"></i>ステータス変更
        </button>
        <button class="btn btn-danger btn-sm" @click="bulkAction('delete')">
          <i class="bi bi-trash me-1"></i>一括削除
        </button>
      </div>
    </div>
  </div>
  
  <!-- データテーブル -->
  <div class="table-responsive">
    <table class="table table-hover mb-0">
      <thead class="table-light">
        <tr>
          <th scope="col">
            <input type="checkbox" 
                   class="form-check-input"
                   :checked="isAllSelected"
                   @change="toggleAllSelection()">
          </th>
          <template x-for="column in visibleColumns" :key="column.key">
            <th scope="col" 
                :class="column.sortable ? 'sortable' : ''"
                @click="column.sortable && sort(column.key)">
              <div class="d-flex align-items-center">
                <span x-text="column.label"></span>
                <template x-if="column.sortable">
                  <i class="bi ms-1"
                     :class="getSortIcon(column.key)"></i>
                </template>
              </div>
            </th>
          </template>
          <th scope="col">操作</th>
        </tr>
      </thead>
      <tbody>
        <!-- ローディング状態 -->
        <template x-if="loading">
          <tr>
            <td :colspan="visibleColumns.length + 2" class="text-center py-4">
              <div class="spinner-border text-primary" role="status">
                <span class="visually-hidden">読み込み中...</span>
              </div>
              <div class="mt-2">データを読み込んでいます...</div>
            </td>
          </tr>
        </template>
        
        <!-- データ行 -->
        <template x-if="!loading && items.length > 0">
          <template x-for="item in items" :key="item.id">
            <tr :class="{ 'table-active': selectedItems.includes(item.id) }">
              <td>
                <input type="checkbox" 
                       class="form-check-input"
                       :value="item.id"
                       :checked="selectedItems.includes(item.id)"
                       @change="toggleSelection(item.id)">
              </td>
              <!-- 動的列表示 -->
              <template x-for="column in visibleColumns" :key="column.key">
                <td x-html="renderCell(item, column)"></td>
              </template>
              <td>
                <div class="btn-group btn-group-sm">
                  <button class="btn btn-outline-primary" 
                          @click="viewItem(item)">
                    <i class="bi bi-eye"></i>
                  </button>
                  <button class="btn btn-outline-secondary" 
                          @click="editItem(item)">
                    <i class="bi bi-pencil"></i>
                  </button>
                  <button class="btn btn-outline-danger" 
                          @click="deleteItem(item)">
                    <i class="bi bi-trash"></i>
                  </button>
                </div>
              </td>
            </tr>
          </template>
        </template>
        
        <!-- データなし -->
        <template x-if="!loading && items.length === 0">
          <tr>
            <td :colspan="visibleColumns.length + 2" class="text-center py-4">
              <div class="text-muted">
                <i class="bi bi-inbox display-4"></i>
                <div class="mt-2">データがありません</div>
                <template x-if="searchQuery">
                  <small>検索条件に一致するデータが見つかりませんでした</small>
                </template>
              </div>
            </td>
          </tr>
        </template>
      </tbody>
    </table>
  </div>
  
  <!-- ページネーション -->
  <div class="table-footer border-top p-3">
    <div class="row align-items-center">
      <div class="col-md-6">
        <small class="text-muted">
          全<span x-text="totalItems"></span>件中 
          <span x-text="startIndex"></span>-<span x-text="endIndex"></span>件を表示
        </small>
      </div>
      <div class="col-md-6 d-flex justify-content-end">
        <nav aria-label="ページネーション">
          <ul class="pagination pagination-sm mb-0">
            <li class="page-item" :class="{ disabled: currentPage === 1 }">
              <button class="page-link" @click="goToPage(currentPage - 1)">前へ</button>
            </li>
            <template x-for="page in pageNumbers" :key="page">
              <li class="page-item" :class="{ active: page === currentPage }">
                <button class="page-link" 
                        @click="goToPage(page)"
                        x-text="page"></button>
              </li>
            </template>
            <li class="page-item" :class="{ disabled: currentPage === totalPages }">
              <button class="page-link" @click="goToPage(currentPage + 1)">次へ</button>
            </li>
          </ul>
        </nav>
      </div>
    </div>
  </div>
</div>

<script>
Alpine.data('dataTable', () => ({
  // データ状態
  items: [],
  totalItems: 0,
  loading: false,
  
  // ページング
  currentPage: 1,
  pageSize: 25,
  totalPages: 1,
  
  // ソート
  sortField: '',
  sortDirection: '',
  
  // 検索・フィルター
  searchQuery: '',
  
  // 選択
  selectedItems: [],
  
  // カラム設定
  availableColumns: [
    { key: 'name', label: '技術者名', visible: true, sortable: true },
    { key: 'email', label: 'メール', visible: true, sortable: true },
    { key: 'status', label: 'ステータス', visible: true, sortable: true },
    { key: 'skills', label: 'スキル', visible: true, sortable: false },
    { key: 'experience', label: '経験年数', visible: true, sortable: true },
    { key: 'updatedAt', label: '更新日', visible: true, sortable: true }
  ],
  
  init() {
    this.loadData();
  },
  
  get visibleColumns() {
    return this.availableColumns.filter(col => col.visible);
  },
  
  get isAllSelected() {
    return this.items.length > 0 && this.selectedItems.length === this.items.length;
  },
  
  get startIndex() {
    return (this.currentPage - 1) * this.pageSize + 1;
  },
  
  get endIndex() {
    return Math.min(this.currentPage * this.pageSize, this.totalItems);
  },
  
  get pageNumbers() {
    const numbers = [];
    const start = Math.max(1, this.currentPage - 2);
    const end = Math.min(this.totalPages, this.currentPage + 2);
    
    for (let i = start; i <= end; i++) {
      numbers.push(i);
    }
    return numbers;
  },
  
  async loadData() {
    this.loading = true;
    try {
      const params = new URLSearchParams({
        page: this.currentPage,
        size: this.pageSize,
        sort: this.sortField,
        direction: this.sortDirection,
        search: this.searchQuery
      });
      
      const response = await fetch(`/api/engineers?${params}`);
      const data = await response.json();
      
      this.items = data.content;
      this.totalItems = data.totalElements;
      this.totalPages = data.totalPages;
    } catch (error) {
      console.error('データ読み込みエラー:', error);
    } finally {
      this.loading = false;
    }
  },
  
  sort(field) {
    if (this.sortField === field) {
      this.sortDirection = this.sortDirection === 'asc' ? 'desc' : 'asc';
    } else {
      this.sortField = field;
      this.sortDirection = 'asc';
    }
    this.loadData();
  },
  
  getSortIcon(field) {
    if (this.sortField !== field) return 'bi-arrow-down-up';
    return this.sortDirection === 'asc' ? 'bi-arrow-up' : 'bi-arrow-down';
  },
  
  search() {
    this.currentPage = 1;
    this.loadData();
  },
  
  clearSearch() {
    this.searchQuery = '';
    this.search();
  },
  
  goToPage(page) {
    if (page >= 1 && page <= this.totalPages) {
      this.currentPage = page;
      this.loadData();
    }
  },
  
  changePageSize() {
    this.currentPage = 1;
    this.loadData();
  },
  
  toggleSelection(id) {
    const index = this.selectedItems.indexOf(id);
    if (index > -1) {
      this.selectedItems.splice(index, 1);
    } else {
      this.selectedItems.push(id);
    }
  },
  
  toggleAllSelection() {
    if (this.isAllSelected) {
      this.selectedItems = [];
    } else {
      this.selectedItems = this.items.map(item => item.id);
    }
  },
  
  toggleColumn(key) {
    const column = this.availableColumns.find(col => col.key === key);
    if (column) {
      column.visible = !column.visible;
    }
  },
  
  renderCell(item, column) {
    switch (column.key) {
      case 'name':
        return `
          <div class="d-flex align-items-center">
            <img src="${item.avatar || '/images/default-avatar.png'}" 
                 class="rounded-circle me-2" width="32" height="32" alt="プロフィール画像">
            <div>
              <div class="fw-medium">${item.name}</div>
              <small class="text-muted">${item.email}</small>
            </div>
          </div>
        `;
      case 'status':
        const statusClass = {
          'AVAILABLE': 'bg-success',
          'ASSIGNED': 'bg-warning',
          'UNAVAILABLE': 'bg-danger'
        }[item.status] || 'bg-secondary';
        return `<span class="badge ${statusClass}">${item.statusLabel}</span>`;
      case 'skills':
        return item.skills.slice(0, 3).map(skill => 
          `<span class="badge bg-primary me-1">${skill}</span>`
        ).join('') + (item.skills.length > 3 ? `<span class="badge bg-secondary">+${item.skills.length - 3}</span>` : '');
      default:
        return item[column.key] || '';
    }
  },
  
  bulkAction(action) {
    console.log(`一括操作: ${action}`, this.selectedItems);
    // 実装は具体的な要件に応じて
  }
}));
</script>
```

### 2. カードレイアウトコンポーネント

#### 2.1 基本カードグリッド
```html
<!-- 技術者カードグリッド -->
<div class="card-grid">
  <div class="row g-3">
    <div class="col-12 col-md-6 col-lg-4">
      <div class="card engineer-card h-100">
        <div class="card-header d-flex justify-content-between align-items-start">
          <div class="d-flex align-items-center">
            <img src="/images/avatars/user1.png" 
                 class="rounded-circle me-2" 
                 width="40" 
                 height="40"
                 alt="プロフィール画像">
            <div>
              <h6 class="card-title mb-0">田中 太郎</h6>
              <small class="text-muted">Senior Developer</small>
            </div>
          </div>
          <div class="dropdown">
            <button class="btn btn-sm btn-outline-secondary" 
                    data-bs-toggle="dropdown">
              <i class="bi bi-three-dots-vertical"></i>
            </button>
            <ul class="dropdown-menu">
              <li><a class="dropdown-item" href="#"><i class="bi bi-eye me-2"></i>詳細表示</a></li>
              <li><a class="dropdown-item" href="#"><i class="bi bi-pencil me-2"></i>編集</a></li>
              <li><hr class="dropdown-divider"></li>
              <li><a class="dropdown-item text-danger" href="#"><i class="bi bi-trash me-2"></i>削除</a></li>
            </ul>
          </div>
        </div>
        <div class="card-body">
          <!-- ステータス -->
          <div class="mb-3">
            <span class="badge bg-success">稼働可能</span>
            <span class="badge bg-info ms-1">リモート対応</span>
          </div>
          
          <!-- スキル -->
          <div class="mb-3">
            <h6 class="text-muted mb-2">主要スキル</h6>
            <div class="skill-tags">
              <span class="badge bg-primary me-1 mb-1">Java</span>
              <span class="badge bg-primary me-1 mb-1">Spring Boot</span>
              <span class="badge bg-secondary me-1 mb-1">PostgreSQL</span>
              <span class="badge bg-info me-1 mb-1">React</span>
            </div>
          </div>
          
          <!-- 基本情報 -->
          <div class="row text-center">
            <div class="col-4">
              <div class="fw-bold text-primary">5.5年</div>
              <small class="text-muted">経験年数</small>
            </div>
            <div class="col-4">
              <div class="fw-bold text-success">¥650K</div>
              <small class="text-muted">希望単価</small>
            </div>
            <div class="col-4">
              <div class="fw-bold text-warning">8.5</div>
              <small class="text-muted">評価</small>
            </div>
          </div>
        </div>
        <div class="card-footer">
          <div class="d-flex justify-content-between align-items-center">
            <small class="text-muted">
              更新: 2025/06/01
            </small>
            <div class="btn-group btn-group-sm">
              <button class="btn btn-outline-primary">
                <i class="bi bi-envelope"></i>
              </button>
              <button class="btn btn-outline-secondary">
                <i class="bi bi-telephone"></i>
              </button>
              <button class="btn btn-primary">
                <i class="bi bi-person-plus"></i> 案件提案
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 他のカード... -->
  </div>
</div>
```

#### 2.2 統計カードコンポーネント
```html
<!-- KPI統計カード -->
<div class="stats-cards">
  <div class="row g-3">
    <!-- 基本統計カード -->
    <div class="col-6 col-md-3">
      <div class="card stats-card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stats-icon bg-primary text-white rounded-3 me-3">
              <i class="bi bi-people-fill"></i>
            </div>
            <div class="flex-grow-1">
              <div class="stats-value h4 mb-0">245</div>
              <div class="stats-label text-muted small">技術者数</div>
            </div>
          </div>
          <div class="stats-trend mt-2">
            <span class="text-success">
              <i class="bi bi-arrow-up"></i> +12
            </span>
            <span class="text-muted small ms-1">前月比</span>
          </div>
        </div>
      </div>
    </div>
    
    <!-- トレンド付き統計カード -->
    <div class="col-6 col-md-3">
      <div class="card stats-card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stats-icon bg-success text-white rounded-3 me-3">
              <i class="bi bi-briefcase-fill"></i>
            </div>
            <div class="flex-grow-1">
              <div class="stats-value h4 mb-0">68</div>
              <div class="stats-label text-muted small">進行中案件</div>
            </div>
          </div>
          <div class="progress mt-2" style="height: 4px;">
            <div class="progress-bar bg-success" style="width: 75%"></div>
          </div>
          <div class="d-flex justify-content-between mt-1">
            <small class="text-muted">目標: 90件</small>
            <small class="text-success">75%</small>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 金額表示カード -->
    <div class="col-6 col-md-3">
      <div class="card stats-card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stats-icon bg-warning text-white rounded-3 me-3">
              <i class="bi bi-currency-yen"></i>
            </div>
            <div class="flex-grow-1">
              <div class="stats-value h4 mb-0">¥2.4M</div>
              <div class="stats-label text-muted small">今月売上</div>
            </div>
          </div>
          <div class="stats-comparison mt-2">
            <div class="d-flex justify-content-between">
              <span class="text-muted small">前月: ¥2.1M</span>
              <span class="text-success small">
                <i class="bi bi-arrow-up"></i> +14.3%
              </span>
            </div>
          </div>
        </div>
      </div>
    </div>
    
    <!-- アクション付きカード -->
    <div class="col-6 col-md-3">
      <div class="card stats-card">
        <div class="card-body">
          <div class="d-flex align-items-center">
            <div class="stats-icon bg-danger text-white rounded-3 me-3">
              <i class="bi bi-exclamation-triangle-fill"></i>
            </div>
            <div class="flex-grow-1">
              <div class="stats-value h4 mb-0">5</div>
              <div class="stats-label text-muted small">要対応案件</div>
            </div>
          </div>
          <div class="mt-2">
            <button class="btn btn-outline-danger btn-sm w-100">
              <i class="bi bi-arrow-right me-1"></i>確認する
            </button>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>
```

### 3. リスト表示コンポーネント

#### 3.1 詳細リスト
```html
<!-- 案件詳細リスト -->
<div class="detail-list">
  <div class="list-group list-group-flush">
    <div class="list-group-item">
      <div class="d-flex w-100 justify-content-between align-items-start">
        <div class="flex-grow-1">
          <div class="d-flex align-items-center mb-2">
            <h6 class="mb-0 me-3">ECサイト リニューアルプロジェクト</h6>
            <span class="badge bg-warning">進行中</span>
            <span class="badge bg-info ms-1">急募</span>
          </div>
          <p class="mb-2 text-muted">
            既存ECサイトのフルリニューアル。React + TypeScript での SPA 化、
            マイクロサービス化による性能向上を目指します。
          </p>
          <div class="row g-3">
            <div class="col-auto">
              <small class="text-muted">
                <i class="bi bi-calendar3 me-1"></i>
                2025/07/01 - 2025/12/31
              </small>
            </div>
            <div class="col-auto">
              <small class="text-muted">
                <i class="bi bi-geo-alt me-1"></i>
                東京都渋谷区（リモート併用）
              </small>
            </div>
            <div class="col-auto">
              <small class="text-muted">
                <i class="bi bi-currency-yen me-1"></i>
                ¥700,000 - ¥900,000
              </small>
            </div>
          </div>
          <div class="mt-2">
            <span class="badge bg-primary me-1">React</span>
            <span class="badge bg-primary me-1">TypeScript</span>
            <span class="badge bg-secondary me-1">Node.js</span>
            <span class="badge bg-info me-1">AWS</span>
          </div>
        </div>
        <div class="btn-group-vertical ms-3">
          <button class="btn btn-outline-primary btn-sm">
            <i class="bi bi-eye"></i> 詳細
          </button>
          <button class="btn btn-outline-secondary btn-sm">
            <i class="bi bi-people"></i> 提案
          </button>
        </div>
      </div>
      <div class="mt-3 pt-3 border-top">
        <div class="row align-items-center">
          <div class="col-md-8">
            <div class="progress" style="height: 6px;">
              <div class="progress-bar bg-warning" style="width: 65%"></div>
            </div>
            <small class="text-muted">進捗: 65% (要件定義完了、設計フェーズ)</small>
          </div>
          <div class="col-md-4 text-md-end">
            <small class="text-muted">更新: 2025/06/01 14:30</small>
          </div>
        </div>
      </div>
    </div>
    
    <!-- 他のリスト項目... -->
  </div>
</div>
```

#### 3.2 コンパクトリスト
```html
<!-- 通知リスト -->
<div class="compact-list">
  <div class="list-group list-group-flush">
    <div class="list-group-item list-group-item-action d-flex align-items-center">
      <div class="notification-icon bg-primary text-white rounded-circle me-3">
        <i class="bi bi-bell-fill"></i>
      </div>
      <div class="flex-grow-1">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1">新しい案件の提案依頼</h6>
          <small class="text-muted">5分前</small>
        </div>
        <p class="mb-1">ECサイトリニューアルプロジェクトについて、React開発者の提案をお待ちしています。</p>
        <small class="text-muted">案件ID: #PRJ-2025-001</small>
      </div>
      <div class="notification-actions">
        <button class="btn btn-sm btn-outline-primary">確認</button>
      </div>
    </div>
    
    <div class="list-group-item list-group-item-action d-flex align-items-center">
      <div class="notification-icon bg-success text-white rounded-circle me-3">
        <i class="bi bi-check-circle-fill"></i>
      </div>
      <div class="flex-grow-1">
        <div class="d-flex w-100 justify-content-between">
          <h6 class="mb-1">契約書の署名が完了しました</h6>
          <small class="text-muted">1時間前</small>
        </div>
        <p class="mb-1">田中太郎さんとの業務委託契約の電子署名が完了しました。</p>
        <small class="text-muted">契約ID: #CTR-2025-023</small>
      </div>
    </div>
    
    <!-- 他の通知... -->
  </div>
</div>
```

### 4. チャート・グラフコンポーネント

#### 4.1 基本チャート（Chart.js）
```html
<!-- 売上推移チャート -->
<div class="chart-container">
  <div class="card">
    <div class="card-header d-flex justify-content-between align-items-center">
      <h5 class="card-title mb-0">売上推移</h5>
      <div class="btn-group btn-group-sm" role="group">
        <input type="radio" class="btn-check" name="chartPeriod" id="monthly" checked>
        <label class="btn btn-outline-secondary" for="monthly">月次</label>
        
        <input type="radio" class="btn-check" name="chartPeriod" id="quarterly">
        <label class="btn btn-outline-secondary" for="quarterly">四半期</label>
        
        <input type="radio" class="btn-check" name="chartPeriod" id="yearly">
        <label class="btn btn-outline-secondary" for="yearly">年次</label>
      </div>
    </div>
    <div class="card-body">
      <canvas id="salesChart" width="400" height="200"></canvas>
    </div>
  </div>
</div>

<script>
// Chart.js実装
document.addEventListener('DOMContentLoaded', function() {
  const ctx = document.getElementById('salesChart').getContext('2d');
  
  const chart = new Chart(ctx, {
    type: 'line',
    data: {
      labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
      datasets: [{
        label: '売上',
        data: [1200000, 1350000, 1800000, 1650000, 2100000, 2400000],
        borderColor: 'rgb(13, 110, 253)',
        backgroundColor: 'rgba(13, 110, 253, 0.1)',
        tension: 0.1,
        fill: true
      }, {
        label: '目標',
        data: [1500000, 1500000, 1700000, 1700000, 2000000, 2000000],
        borderColor: 'rgb(220, 53, 69)',
        borderDash: [5, 5],
        fill: false
      }]
    },
    options: {
      responsive: true,
      maintainAspectRatio: false,
      scales: {
        y: {
          beginAtZero: true,
          ticks: {
            callback: function(value) {
              return '¥' + (value / 1000000) + 'M';
            }
          }
        }
      },
      plugins: {
        legend: {
          position: 'top',
        },
        tooltip: {
          callbacks: {
            label: function(context) {
              return context.dataset.label + ': ¥' + 
                     context.parsed.y.toLocaleString();
            }
          }
        }
      }
    }
  });
  
  // 期間切り替え
  document.querySelectorAll('input[name="chartPeriod"]').forEach(radio => {
    radio.addEventListener('change', function() {
      updateChart(chart, this.id);
    });
  });
});

function updateChart(chart, period) {
  // 期間に応じてデータを更新
  const data = {
    monthly: {
      labels: ['1月', '2月', '3月', '4月', '5月', '6月'],
      sales: [1200000, 1350000, 1800000, 1650000, 2100000, 2400000],
      targets: [1500000, 1500000, 1700000, 1700000, 2000000, 2000000]
    },
    quarterly: {
      labels: ['Q1', 'Q2', 'Q3', 'Q4'],
      sales: [4350000, 5550000, 6200000, 7100000],
      targets: [4700000, 5400000, 6000000, 6800000]
    },
    yearly: {
      labels: ['2021', '2022', '2023', '2024', '2025'],
      sales: [18000000, 22000000, 26000000, 31000000, 35000000],
      targets: [20000000, 24000000, 28000000, 32000000, 36000000]
    }
  };
  
  chart.data.labels = data[period].labels;
  chart.data.datasets[0].data = data[period].sales;
  chart.data.datasets[1].data = data[period].targets;
  chart.update();
}
</script>
```

#### 4.2 ダッシュボードウィジェット
```html
<!-- ドーナツチャートウィジェット -->
<div class="widget-container">
  <div class="row g-3">
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h6 class="card-title mb-0">スキル分布</h6>
        </div>
        <div class="card-body">
          <canvas id="skillsChart" width="300" height="300"></canvas>
        </div>
      </div>
    </div>
    
    <div class="col-md-6">
      <div class="card">
        <div class="card-header">
          <h6 class="card-title mb-0">稼働状況</h6>
        </div>
        <div class="card-body">
          <canvas id="statusChart" width="300" height="300"></canvas>
          
          <!-- 凡例 -->
          <div class="chart-legend mt-3">
            <div class="row">
              <div class="col-6">
                <div class="d-flex align-items-center">
                  <div class="legend-color bg-success me-2"></div>
                  <span class="small">稼働中: 156人</span>
                </div>
              </div>
              <div class="col-6">
                <div class="d-flex align-items-center">
                  <div class="legend-color bg-warning me-2"></div>
                  <span class="small">待機中: 89人</span>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</div>

<style>
.legend-color {
  width: 12px;
  height: 12px;
  border-radius: 2px;
}
</style>
```

## 高度な表示機能

### 1. 仮想化テーブル（大量データ対応）

```html
<!-- 仮想化されたテーブル -->
<div class="virtual-table" x-data="virtualTable">
  <div class="table-header">
    <div class="table-row">
      <div class="table-cell">名前</div>
      <div class="table-cell">メール</div>
      <div class="table-cell">ステータス</div>
      <div class="table-cell">操作</div>
    </div>
  </div>
  
  <div class="table-body" 
       :style="`height: ${containerHeight}px; overflow-y: auto;`"
       @scroll="handleScroll()">
    <div :style="`height: ${totalHeight}px; position: relative;`">
      <template x-for="item in visibleItems" :key="item.id">
        <div class="table-row" 
             :style="`position: absolute; top: ${item.top}px; width: 100%;`">
          <div class="table-cell" x-text="item.name"></div>
          <div class="table-cell" x-text="item.email"></div>
          <div class="table-cell">
            <span class="badge" 
                  :class="getStatusClass(item.status)"
                  x-text="item.statusLabel"></span>
          </div>
          <div class="table-cell">
            <button class="btn btn-sm btn-outline-primary">編集</button>
          </div>
        </div>
      </template>
    </div>
  </div>
</div>

<script>
Alpine.data('virtualTable', () => ({
  allItems: [],
  visibleItems: [],
  containerHeight: 400,
  rowHeight: 50,
  scrollTop: 0,
  buffer: 5,
  
  init() {
    this.loadAllData();
    this.updateVisibleItems();
  },
  
  get totalHeight() {
    return this.allItems.length * this.rowHeight;
  },
  
  get startIndex() {
    return Math.max(0, Math.floor(this.scrollTop / this.rowHeight) - this.buffer);
  },
  
  get endIndex() {
    const visibleCount = Math.ceil(this.containerHeight / this.rowHeight);
    return Math.min(this.allItems.length, this.startIndex + visibleCount + this.buffer * 2);
  },
  
  handleScroll() {
    this.scrollTop = this.$el.querySelector('.table-body').scrollTop;
    this.updateVisibleItems();
  },
  
  updateVisibleItems() {
    this.visibleItems = this.allItems
      .slice(this.startIndex, this.endIndex)
      .map((item, index) => ({
        ...item,
        top: (this.startIndex + index) * this.rowHeight
      }));
  },
  
  async loadAllData() {
    // 大量データの読み込み
    const response = await fetch('/api/engineers/all');
    this.allItems = await response.json();
    this.updateVisibleItems();
  }
}));
</script>
```

### 2. 無限スクロール

```html
<!-- 無限スクロールリスト -->
<div class="infinite-scroll" x-data="infiniteScroll">
  <div class="list-container">
    <template x-for="item in items" :key="item.id">
      <div class="list-item card mb-3">
        <div class="card-body">
          <h6 x-text="item.name"></h6>
          <p x-text="item.description"></p>
        </div>
      </div>
    </template>
  </div>
  
  <!-- ローディングインジケーター -->
  <div x-show="loading" class="text-center py-3">
    <div class="spinner-border" role="status">
      <span class="visually-hidden">読み込み中...</span>
    </div>
  </div>
  
  <!-- 監視要素 -->
  <div x-ref="sentinel" class="sentinel"></div>
</div>

<script>
Alpine.data('infiniteScroll', () => ({
  items: [],
  loading: false,
  page: 1,
  hasMore: true,
  
  init() {
    this.loadMore();
    this.setupIntersectionObserver();
  },
  
  setupIntersectionObserver() {
    const observer = new IntersectionObserver((entries) => {
      if (entries[0].isIntersecting && !this.loading && this.hasMore) {
        this.loadMore();
      }
    }, { threshold: 0.1 });
    
    observer.observe(this.$refs.sentinel);
  },
  
  async loadMore() {
    if (this.loading) return;
    
    this.loading = true;
    try {
      const response = await fetch(`/api/data?page=${this.page}&size=20`);
      const data = await response.json();
      
      this.items.push(...data.content);
      this.page++;
      this.hasMore = !data.last;
    } catch (error) {
      console.error('読み込みエラー:', error);
    } finally {
      this.loading = false;
    }
  }
}));
</script>
```

## レスポンシブ対応

### 1. ブレークポイント別表示制御

```css
/* レスポンシブテーブル */
.responsive-table {
  width: 100%;
  overflow-x: auto;
}

/* モバイル: カード形式 */
@media (max-width: 767px) {
  .table-responsive-stack .table,
  .table-responsive-stack .table thead,
  .table-responsive-stack .table tbody,
  .table-responsive-stack .table th,
  .table-responsive-stack .table td,
  .table-responsive-stack .table tr {
    display: block;
  }
  
  .table-responsive-stack .table thead tr {
    position: absolute;
    top: -9999px;
    left: -9999px;
  }
  
  .table-responsive-stack .table tr {
    border: 1px solid #ccc;
    margin-bottom: 10px;
    padding: 10px;
    border-radius: 8px;
  }
  
  .table-responsive-stack .table td {
    border: none;
    position: relative;
    padding-left: 50% !important;
  }
  
  .table-responsive-stack .table td:before {
    content: attr(data-label) ": ";
    position: absolute;
    left: 6px;
    width: 45%;
    padding-right: 10px;
    white-space: nowrap;
    font-weight: bold;
  }
}

/* タブレット: 一部列を非表示 */
@media (min-width: 768px) and (max-width: 1023px) {
  .table .d-md-none {
    display: none !important;
  }
}
```

### 2. アダプティブコンポーネント

```html
<!-- デバイス別表示切り替え -->
<div class="adaptive-view" x-data="adaptiveView">
  <!-- デスクトップ: テーブル表示 -->
  <div x-show="viewMode === 'table'" class="table-view">
    <div class="table-responsive">
      <table class="table">
        <!-- テーブル内容 -->
      </table>
    </div>
  </div>
  
  <!-- タブレット・モバイル: カード表示 -->
  <div x-show="viewMode === 'cards'" class="cards-view">
    <div class="row g-3">
      <template x-for="item in items" :key="item.id">
        <div class="col-12 col-md-6">
          <div class="card">
            <!-- カード内容 -->
          </div>
        </div>
      </template>
    </div>
  </div>
  
  <!-- 表示切り替えボタン -->
  <div class="view-controls mt-3">
    <div class="btn-group" role="group">
      <button type="button" 
              class="btn"
              :class="viewMode === 'table' ? 'btn-primary' : 'btn-outline-primary'"
              @click="setViewMode('table')">
        <i class="bi bi-table"></i> テーブル
      </button>
      <button type="button" 
              class="btn"
              :class="viewMode === 'cards' ? 'btn-primary' : 'btn-outline-primary'"
              @click="setViewMode('cards')">
        <i class="bi bi-grid-3x3-gap"></i> カード
      </button>
    </div>
  </div>
</div>

<script>
Alpine.data('adaptiveView', () => ({
  viewMode: 'table',
  
  init() {
    this.setInitialViewMode();
    window.addEventListener('resize', () => this.setInitialViewMode());
  },
  
  setInitialViewMode() {
    const width = window.innerWidth;
    if (width < 768) {
      this.viewMode = 'cards';
    } else {
      this.viewMode = 'table';
    }
  },
  
  setViewMode(mode) {
    this.viewMode = mode;
    localStorage.setItem('preferred-view-mode', mode);
  }
}));
</script>
```

## パフォーマンス最適化

### 1. 遅延読み込み

```html
<!-- 画像遅延読み込み -->
<img src="data:image/svg+xml,%3Csvg xmlns='http://www.w3.org/2000/svg' width='40' height='40'%3E%3Crect width='100%25' height='100%25' fill='%23f8f9fa'/%3E%3C/svg%3E"
     data-src="/images/avatars/user1.png"
     class="lazy-load rounded-circle"
     width="40" 
     height="40"
     alt="プロフィール画像">

<script>
// Intersection Observer による遅延読み込み
document.addEventListener('DOMContentLoaded', function() {
  const lazyImages = document.querySelectorAll('.lazy-load');
  
  const imageObserver = new IntersectionObserver((entries, observer) => {
    entries.forEach(entry => {
      if (entry.isIntersecting) {
        const img = entry.target;
        img.src = img.dataset.src;
        img.classList.remove('lazy-load');
        observer.unobserve(img);
      }
    });
  });
  
  lazyImages.forEach(img => imageObserver.observe(img));
});
</script>
```

### 2. キャッシュ活用

```javascript
// データキャッシュ機能
class DataCache {
  constructor(maxAge = 5 * 60 * 1000) { // 5分
    this.cache = new Map();
    this.maxAge = maxAge;
  }
  
  set(key, data) {
    this.cache.set(key, {
      data,
      timestamp: Date.now()
    });
  }
  
  get(key) {
    const item = this.cache.get(key);
    if (!item) return null;
    
    if (Date.now() - item.timestamp > this.maxAge) {
      this.cache.delete(key);
      return null;
    }
    
    return item.data;
  }
  
  clear() {
    this.cache.clear();
  }
}

// 使用例
const dataCache = new DataCache();

async function fetchData(url) {
  const cached = dataCache.get(url);
  if (cached) return cached;
  
  const response = await fetch(url);
  const data = await response.json();
  
  dataCache.set(url, data);
  return data;
}
```

## アクセシビリティ実装

### 1. スクリーンリーダー対応

```html
<!-- 適切なARIA属性を持つテーブル -->
<table class="table" 
       role="table" 
       aria-label="技術者一覧"
       aria-describedby="table-description">
  <caption id="table-description" class="visually-hidden">
    技術者の一覧表です。名前、メールアドレス、ステータス、スキル等の情報が表示されています。
  </caption>
  <thead>
    <tr role="row">
      <th scope="col" role="columnheader" aria-sort="none">
        <button class="btn btn-link" aria-label="技術者名で並び替え">
          技術者名
        </button>
      </th>
      <!-- 他のヘッダー... -->
    </tr>
  </thead>
  <tbody>
    <tr role="row">
      <td role="cell">
        <div class="d-flex align-items-center">
          <img src="/images/avatar.png" 
               alt="田中太郎のプロフィール画像"
               class="rounded-circle me-2">
          <span>田中太郎</span>
        </div>
      </td>
      <!-- 他のセル... -->
    </tr>
  </tbody>
</table>
```

### 2. キーボード操作サポート

```javascript
// キーボードナビゲーション
class TableNavigation {
  constructor(tableElement) {
    this.table = tableElement;
    this.currentRow = 0;
    this.currentCell = 0;
    this.setupKeyboardHandlers();
  }
  
  setupKeyboardHandlers() {
    this.table.addEventListener('keydown', (e) => {
      switch (e.key) {
        case 'ArrowUp':
          e.preventDefault();
          this.moveUp();
          break;
        case 'ArrowDown':
          e.preventDefault();
          this.moveDown();
          break;
        case 'ArrowLeft':
          e.preventDefault();
          this.moveLeft();
          break;
        case 'ArrowRight':
          e.preventDefault();
          this.moveRight();
          break;
        case 'Enter':
        case ' ':
          e.preventDefault();
          this.activateCell();
          break;
      }
    });
  }
  
  moveUp() {
    if (this.currentRow > 0) {
      this.currentRow--;
      this.focusCell();
    }
  }
  
  moveDown() {
    const rows = this.table.querySelectorAll('tbody tr');
    if (this.currentRow < rows.length - 1) {
      this.currentRow++;
      this.focusCell();
    }
  }
  
  moveLeft() {
    if (this.currentCell > 0) {
      this.currentCell--;
      this.focusCell();
    }
  }
  
  moveRight() {
    const cells = this.getCurrentRow().querySelectorAll('td');
    if (this.currentCell < cells.length - 1) {
      this.currentCell++;
      this.focusCell();
    }
  }
  
  getCurrentRow() {
    const rows = this.table.querySelectorAll('tbody tr');
    return rows[this.currentRow];
  }
  
  focusCell() {
    const row = this.getCurrentRow();
    const cells = row.querySelectorAll('td');
    const cell = cells[this.currentCell];
    
    // セル内のフォーカス可能要素を探す
    const focusable = cell.querySelector('button, a, input, select, [tabindex]');
    if (focusable) {
      focusable.focus();
    } else {
      cell.focus();
    }
  }
  
  activateCell() {
    const row = this.getCurrentRow();
    const cells = row.querySelectorAll('td');
    const cell = cells[this.currentCell];
    
    const button = cell.querySelector('button');
    if (button) {
      button.click();
    }
  }
}

// 初期化
document.addEventListener('DOMContentLoaded', () => {
  const tables = document.querySelectorAll('.keyboard-navigable');
  tables.forEach(table => new TableNavigation(table));
});
```

## 実装ガイドライン

### 1. CSS設計

```css
/* データ表示コンポーネント用CSS */
.data-display {
  /* ベーススタイル */
}

.data-display__table {
  /* テーブル固有スタイル */
}

.data-display__card {
  /* カード固有スタイル */
}

.data-display__list {
  /* リスト固有スタイル */
}

/* 状態クラス */
.data-display--loading {
  /* ローディング状態 */
}

.data-display--empty {
  /* 空状態 */
}

.data-display--error {
  /* エラー状態 */
}
```

### 2. 品質チェックリスト

#### データ表示品質チェック
- [ ] データが適切にグループ化されている
- [ ] ソート・フィルター機能が動作する
- [ ] 大量データでもパフォーマンスが良い
- [ ] エラー状態が適切に表示される
- [ ] 空データ状態が適切に表示される
- [ ] レスポンシブ対応ができている
- [ ] アクセシビリティ要件を満たしている
- [ ] キーボード操作ができる

---

**作成者**: システム化プロジェクトチーム  
**作成日**: 2025年6月1日  
**バージョン**: 1.0