# ナビゲーション詳細設計

## 概要

SES業務システムにおけるナビゲーション機能の詳細設計です。サイドバーメニュー、パンくずリスト、ページネーション、タブナビゲーション等、ユーザーが効率的にシステム内を移動できる統一されたナビゲーション体験を提供します。

## 基本設計原則

### 1. 直感的な操作性
- **明確な階層構造**: 論理的で理解しやすいメニュー構成
- **現在位置の明示**: ユーザーが迷わない位置指示
- **予測可能な動作**: 一貫したナビゲーション体験

### 2. 効率的なアクセス
- **ショートカット**: 頻繁に使用する機能への素早いアクセス
- **検索機能**: 目的のページ・機能への直接アクセス
- **履歴・お気に入り**: よく使う機能の記憶と再利用

### 3. レスポンシブ対応
- **適応的レイアウト**: デバイスサイズに応じたメニュー表示
- **タッチ操作対応**: モバイルデバイスでの操作性
- **アクセシビリティ**: キーボード操作・スクリーンリーダー対応

## メインナビゲーション（サイドバー）

### 1. サイドバー基本構造

#### 1.1 デスクトップ版サイドバー
```html
<!-- デスクトップ用サイドバー -->
<nav class="sidebar d-none d-lg-block" id="sidebar">
  <!-- サイドバーヘッダー -->
  <div class="sidebar-header">
    <div class="d-flex align-items-center p-3">
      <img src="/images/logo.png" alt="SES Manager" class="sidebar-logo me-2" width="32" height="32">
      <span class="sidebar-title fw-bold">SES Manager</span>
    </div>
  </div>
  
  <!-- ユーザー情報 -->
  <div class="sidebar-user">
    <div class="d-flex align-items-center p-3 border-bottom">
      <img src="/images/user-avatar.png" 
           alt="ユーザーアバター" 
           class="rounded-circle me-2" 
           width="40" 
           height="40">
      <div class="flex-grow-1">
        <div class="fw-medium">田中 太郎</div>
        <small class="text-muted">管理者</small>
      </div>
      <div class="dropdown">
        <button class="btn btn-link p-0" 
                data-bs-toggle="dropdown" 
                aria-expanded="false">
          <i class="bi bi-three-dots-vertical"></i>
        </button>
        <ul class="dropdown-menu">
          <li><a class="dropdown-item" href="/profile"><i class="bi bi-person me-2"></i>プロフィール</a></li>
          <li><a class="dropdown-item" href="/settings"><i class="bi bi-gear me-2"></i>設定</a></li>
          <li><hr class="dropdown-divider"></li>
          <li><a class="dropdown-item" href="/logout"><i class="bi bi-box-arrow-right me-2"></i>ログアウト</a></li>
        </ul>
      </div>
    </div>
  </div>
  
  <!-- メインメニュー -->
  <div class="sidebar-menu">
    <ul class="nav flex-column" role="menubar">
      <!-- ダッシュボード -->
      <li class="nav-item" role="none">
        <a class="nav-link active" 
           href="/dashboard" 
           role="menuitem"
           aria-current="page">
          <i class="bi bi-speedometer2 nav-icon"></i>
          <span class="nav-text">ダッシュボード</span>
        </a>
      </li>
      
      <!-- 案件管理 -->
      <li class="nav-item" role="none">
        <a class="nav-link" 
           href="#projectSubmenu" 
           data-bs-toggle="collapse" 
           role="menuitem"
           aria-expanded="false"
           aria-controls="projectSubmenu">
          <i class="bi bi-briefcase nav-icon"></i>
          <span class="nav-text">案件管理</span>
          <i class="bi bi-chevron-down nav-arrow"></i>
        </a>
        <div class="collapse" id="projectSubmenu">
          <ul class="nav flex-column submenu" role="menu">
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/projects" 
                 role="menuitem">
                <span class="submenu-text">案件一覧</span>
              </a>
            </li>
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/projects/new" 
                 role="menuitem">
                <span class="submenu-text">新規案件登録</span>
              </a>
            </li>
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/projects/status" 
                 role="menuitem">
                <span class="submenu-text">ステータス管理</span>
              </a>
            </li>
          </ul>
        </div>
      </li>
      
      <!-- 技術者管理 -->
      <li class="nav-item" role="none">
        <a class="nav-link" 
           href="#engineerSubmenu" 
           data-bs-toggle="collapse" 
           role="menuitem"
           aria-expanded="false">
          <i class="bi bi-people nav-icon"></i>
          <span class="nav-text">技術者管理</span>
          <i class="bi bi-chevron-down nav-arrow"></i>
        </a>
        <div class="collapse" id="engineerSubmenu">
          <ul class="nav flex-column submenu" role="menu">
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/engineers" 
                 role="menuitem">
                <span class="submenu-text">技術者一覧</span>
              </a>
            </li>
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/engineers/new" 
                 role="menuitem">
                <span class="submenu-text">新規登録</span>
              </a>
            </li>
            <li class="nav-item" role="none">
              <a class="nav-link submenu-link" 
                 href="/engineers/skills" 
                 role="menuitem">
                <span class="submenu-text">スキル管理</span>
              </a>
            </li>
          </ul>
        </div>
      </li>
      
      <!-- マッチング -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/matching" role="menuitem">
          <i class="bi bi-shuffle nav-icon"></i>
          <span class="nav-text">マッチング</span>
          <span class="badge bg-warning text-dark ms-auto">3</span>
        </a>
      </li>
      
      <!-- 契約管理 -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/contracts" role="menuitem">
          <i class="bi bi-file-text nav-icon"></i>
          <span class="nav-text">契約管理</span>
        </a>
      </li>
      
      <!-- 勤怠・工数 -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/timesheets" role="menuitem">
          <i class="bi bi-clock nav-icon"></i>
          <span class="nav-text">勤怠・工数</span>
        </a>
      </li>
      
      <!-- 請求・支払 -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/billing" role="menuitem">
          <i class="bi bi-credit-card nav-icon"></i>
          <span class="nav-text">請求・支払</span>
        </a>
      </li>
      
      <!-- レポート -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/reports" role="menuitem">
          <i class="bi bi-graph-up nav-icon"></i>
          <span class="nav-text">レポート</span>
        </a>
      </li>
      
      <!-- 通知 -->
      <li class="nav-item" role="none">
        <a class="nav-link" href="/notifications" role="menuitem">
          <i class="bi bi-bell nav-icon"></i>
          <span class="nav-text">通知</span>
          <span class="badge bg-danger ms-auto">5</span>
        </a>
      </li>
    </ul>
  </div>
  
  <!-- サイドバーフッター -->
  <div class="sidebar-footer mt-auto p-3 border-top">
    <div class="d-flex justify-content-between align-items-center">
      <small class="text-muted">v2.1.0</small>
      <div>
        <button class="btn btn-link btn-sm p-1" 
                title="ヘルプ"
                data-bs-toggle="modal" 
                data-bs-target="#helpModal">
          <i class="bi bi-question-circle"></i>
        </button>
        <button class="btn btn-link btn-sm p-1" 
                title="設定">
          <i class="bi bi-gear"></i>
        </button>
      </div>
    </div>
  </div>
</nav>
```

#### 1.2 タブレット版サイドバー（折りたたみ）
```html
<!-- タブレット用折りたたみサイドバー -->
<nav class="sidebar sidebar-collapsed d-none d-md-block d-lg-none" id="sidebarTablet">
  <!-- 簡略ヘッダー -->
  <div class="sidebar-header-collapsed">
    <div class="text-center p-2">
      <img src="/images/logo-icon.png" alt="SES" width="32" height="32">
    </div>
  </div>
  
  <!-- 簡略メニュー -->
  <div class="sidebar-menu-collapsed">
    <ul class="nav flex-column">
      <li class="nav-item">
        <a class="nav-link text-center" 
           href="/dashboard" 
           title="ダッシュボード"
           data-bs-toggle="tooltip" 
           data-bs-placement="right">
          <i class="bi bi-speedometer2"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-center" 
           href="/projects" 
           title="案件管理">
          <i class="bi bi-briefcase"></i>
        </a>
      </li>
      <li class="nav-item">
        <a class="nav-link text-center" 
           href="/engineers" 
           title="技術者管理">
          <i class="bi bi-people"></i>
        </a>
      </li>
      <!-- 他のメニュー項目... -->
    </ul>
  </div>
</nav>
```

#### 1.3 モバイル版オフキャンバス
```html
<!-- モバイル用オフキャンバスサイドバー -->
<div class="offcanvas offcanvas-start d-md-none" 
     tabindex="-1" 
     id="mobileNavbar" 
     aria-labelledby="mobileNavbarLabel">
  <div class="offcanvas-header">
    <h5 class="offcanvas-title" id="mobileNavbarLabel">
      <img src="/images/logo.png" alt="SES Manager" width="24" height="24" class="me-2">
      SES Manager
    </h5>
    <button type="button" 
            class="btn-close" 
            data-bs-dismiss="offcanvas" 
            aria-label="メニューを閉じる"></button>
  </div>
  <div class="offcanvas-body">
    <!-- モバイル用メニュー（アコーディオン形式） -->
    <div class="accordion" id="mobileMenuAccordion">
      <div class="accordion-item">
        <h2 class="accordion-header">
          <button class="accordion-button" 
                  type="button" 
                  data-bs-toggle="collapse" 
                  data-bs-target="#projectMobileMenu">
            <i class="bi bi-briefcase me-2"></i>案件管理
          </button>
        </h2>
        <div id="projectMobileMenu" 
             class="accordion-collapse collapse show" 
             data-bs-parent="#mobileMenuAccordion">
          <div class="accordion-body">
            <ul class="list-unstyled">
              <li><a href="/projects" class="text-decoration-none">案件一覧</a></li>
              <li><a href="/projects/new" class="text-decoration-none">新規案件登録</a></li>
              <li><a href="/projects/status" class="text-decoration-none">ステータス管理</a></li>
            </ul>
          </div>
        </div>
      </div>
      <!-- 他のアコーディオン項目... -->
    </div>
  </div>
</div>

<!-- モバイルメニュートグルボタン -->
<button class="btn btn-outline-secondary d-md-none" 
        type="button" 
        data-bs-toggle="offcanvas" 
        data-bs-target="#mobileNavbar"
        aria-controls="mobileNavbar">
  <i class="bi bi-list"></i>
  <span class="visually-hidden">メニューを開く</span>
</button>
```

### 2. 動的ナビゲーション（Alpine.js）

#### 2.1 スマートナビゲーション
```html
<!-- 動的サイドバー -->
<nav class="sidebar" x-data="smartNavigation">
  <!-- 検索機能 -->
  <div class="sidebar-search p-3">
    <div class="input-group">
      <span class="input-group-text">
        <i class="bi bi-search"></i>
      </span>
      <input type="text" 
             class="form-control" 
             placeholder="メニュー検索..."
             x-model="searchQuery"
             @input="filterMenu()">
    </div>
  </div>
  
  <!-- 最近使用した機能 -->
  <div class="sidebar-recent" x-show="recentItems.length > 0 && !searchQuery">
    <div class="p-3">
      <h6 class="text-muted mb-2">最近使用した機能</h6>
      <ul class="nav flex-column">
        <template x-for="item in recentItems.slice(0, 5)" :key="item.path">
          <li class="nav-item">
            <a class="nav-link py-1" 
               :href="item.path"
               @click="addToRecent(item)">
              <i :class="item.icon + ' nav-icon'"></i>
              <span x-text="item.title"></span>
            </a>
          </li>
        </template>
      </ul>
    </div>
  </div>
  
  <!-- お気に入り -->
  <div class="sidebar-favorites" x-show="favoriteItems.length > 0 && !searchQuery">
    <div class="p-3">
      <h6 class="text-muted mb-2">お気に入り</h6>
      <ul class="nav flex-column">
        <template x-for="item in favoriteItems" :key="item.path">
          <li class="nav-item">
            <div class="d-flex align-items-center">
              <a class="nav-link py-1 flex-grow-1" 
                 :href="item.path">
                <i :class="item.icon + ' nav-icon'"></i>
                <span x-text="item.title"></span>
              </a>
              <button class="btn btn-link btn-sm p-0" 
                      @click="removeFromFavorites(item)"
                      title="お気に入りから削除">
                <i class="bi bi-star-fill text-warning"></i>
              </button>
            </div>
          </li>
        </template>
      </ul>
    </div>
  </div>
  
  <!-- フィルター済みメニュー -->
  <div class="sidebar-menu">
    <ul class="nav flex-column">
      <template x-for="item in filteredMenuItems" :key="item.id">
        <li class="nav-item" 
            x-show="item.visible"
            :class="{ 'nav-item-highlight': item.highlighted }">
          <!-- 親メニュー -->
          <template x-if="item.children && item.children.length > 0">
            <div>
              <a class="nav-link" 
                 :href="'#' + item.id + 'Submenu'" 
                 data-bs-toggle="collapse"
                 @click="addToRecent(item)">
                <i :class="item.icon + ' nav-icon'"></i>
                <span class="nav-text" x-text="item.title"></span>
                <i class="bi bi-chevron-down nav-arrow"></i>
              </a>
              <div class="collapse" :id="item.id + 'Submenu'">
                <ul class="nav flex-column submenu">
                  <template x-for="child in item.children" :key="child.id">
                    <li class="nav-item" x-show="child.visible">
                      <a class="nav-link submenu-link" 
                         :href="child.path"
                         @click="addToRecent(child)">
                        <span class="submenu-text" x-text="child.title"></span>
                        <button class="btn btn-link btn-sm p-0 ms-auto" 
                                @click.prevent="toggleFavorite(child)"
                                :title="isFavorite(child) ? 'お気に入りから削除' : 'お気に入りに追加'">
                          <i :class="isFavorite(child) ? 'bi bi-star-fill text-warning' : 'bi bi-star'"></i>
                        </button>
                      </a>
                    </li>
                  </template>
                </ul>
              </div>
            </div>
          </template>
          
          <!-- 単独メニュー -->
          <template x-if="!item.children || item.children.length === 0">
            <a class="nav-link" 
               :href="item.path"
               @click="addToRecent(item)">
              <i :class="item.icon + ' nav-icon'"></i>
              <span class="nav-text" x-text="item.title"></span>
              <span x-show="item.badge" 
                    class="badge bg-danger ms-auto" 
                    x-text="item.badge"></span>
            </a>
          </template>
        </li>
      </template>
    </ul>
  </div>
</nav>

<script>
Alpine.data('smartNavigation', () => ({
  searchQuery: '',
  recentItems: [],
  favoriteItems: [],
  menuItems: [
    {
      id: 'dashboard',
      title: 'ダッシュボード',
      path: '/dashboard',
      icon: 'bi bi-speedometer2',
      visible: true,
      highlighted: false
    },
    {
      id: 'projects',
      title: '案件管理',
      icon: 'bi bi-briefcase',
      visible: true,
      highlighted: false,
      children: [
        { id: 'projects-list', title: '案件一覧', path: '/projects', visible: true },
        { id: 'projects-new', title: '新規案件登録', path: '/projects/new', visible: true },
        { id: 'projects-status', title: 'ステータス管理', path: '/projects/status', visible: true }
      ]
    },
    {
      id: 'engineers',
      title: '技術者管理',
      icon: 'bi bi-people',
      visible: true,
      highlighted: false,
      children: [
        { id: 'engineers-list', title: '技術者一覧', path: '/engineers', visible: true },
        { id: 'engineers-new', title: '新規登録', path: '/engineers/new', visible: true },
        { id: 'engineers-skills', title: 'スキル管理', path: '/engineers/skills', visible: true }
      ]
    },
    // 他のメニュー項目...
  ],
  
  init() {
    this.loadRecentItems();
    this.loadFavoriteItems();
  },
  
  get filteredMenuItems() {
    return this.menuItems;
  },
  
  filterMenu() {
    if (!this.searchQuery) {
      this.resetMenuVisibility();
      return;
    }
    
    const query = this.searchQuery.toLowerCase();
    
    this.menuItems.forEach(item => {
      let itemMatch = item.title.toLowerCase().includes(query);
      let childMatch = false;
      
      if (item.children) {
        item.children.forEach(child => {
          const childMatches = child.title.toLowerCase().includes(query);
          child.visible = childMatches;
          if (childMatches) childMatch = true;
        });
      }
      
      item.visible = itemMatch || childMatch;
      item.highlighted = itemMatch;
    });
  },
  
  resetMenuVisibility() {
    this.menuItems.forEach(item => {
      item.visible = true;
      item.highlighted = false;
      if (item.children) {
        item.children.forEach(child => {
          child.visible = true;
        });
      }
    });
  },
  
  addToRecent(item) {
    const existingIndex = this.recentItems.findIndex(recent => recent.path === item.path);
    if (existingIndex > -1) {
      this.recentItems.splice(existingIndex, 1);
    }
    
    this.recentItems.unshift({
      title: item.title,
      path: item.path,
      icon: item.icon || 'bi bi-circle',
      timestamp: Date.now()
    });
    
    // 最大10件まで保持
    this.recentItems = this.recentItems.slice(0, 10);
    this.saveRecentItems();
  },
  
  toggleFavorite(item) {
    const existingIndex = this.favoriteItems.findIndex(fav => fav.path === item.path);
    
    if (existingIndex > -1) {
      this.favoriteItems.splice(existingIndex, 1);
    } else {
      this.favoriteItems.push({
        title: item.title,
        path: item.path,
        icon: item.icon || 'bi bi-circle'
      });
    }
    
    this.saveFavoriteItems();
  },
  
  removeFromFavorites(item) {
    const index = this.favoriteItems.findIndex(fav => fav.path === item.path);
    if (index > -1) {
      this.favoriteItems.splice(index, 1);
      this.saveFavoriteItems();
    }
  },
  
  isFavorite(item) {
    return this.favoriteItems.some(fav => fav.path === item.path);
  },
  
  loadRecentItems() {
    const stored = localStorage.getItem('navigation-recent');
    if (stored) {
      this.recentItems = JSON.parse(stored);
    }
  },
  
  saveRecentItems() {
    localStorage.setItem('navigation-recent', JSON.stringify(this.recentItems));
  },
  
  loadFavoriteItems() {
    const stored = localStorage.getItem('navigation-favorites');
    if (stored) {
      this.favoriteItems = JSON.parse(stored);
    }
  },
  
  saveFavoriteItems() {
    localStorage.setItem('navigation-favorites', JSON.stringify(this.favoriteItems));
  }
}));
</script>
```

## パンくずリスト

### 1. 基本パンくずリスト

#### 1.1 標準パンくずリスト
```html
<!-- 基本パンくずリスト -->
<nav aria-label="パンくず" class="breadcrumb-container">
  <ol class="breadcrumb mb-0">
    <li class="breadcrumb-item">
      <a href="/dashboard" class="text-decoration-none">
        <i class="bi bi-house-door me-1"></i>ホーム
      </a>
    </li>
    <li class="breadcrumb-item">
      <a href="/engineers" class="text-decoration-none">技術者管理</a>
    </li>
    <li class="breadcrumb-item active" aria-current="page">
      技術者詳細
    </li>
  </ol>
</nav>
```

#### 1.2 動的パンくずリスト
```html
<!-- 動的パンくずリスト -->
<nav aria-label="パンくず" class="breadcrumb-container" x-data="breadcrumb">
  <ol class="breadcrumb mb-0">
    <template x-for="(item, index) in breadcrumbItems" :key="index">
      <li class="breadcrumb-item" 
          :class="{ 'active': index === breadcrumbItems.length - 1 }"
          :aria-current="index === breadcrumbItems.length - 1 ? 'page' : null">
        <template x-if="index < breadcrumbItems.length - 1">
          <a :href="item.path" 
             class="text-decoration-none"
             x-text="item.title"></a>
        </template>
        <template x-if="index === breadcrumbItems.length - 1">
          <span x-text="item.title"></span>
        </template>
      </li>
    </template>
  </ol>
  
  <!-- ドロップダウン履歴（省略時） -->
  <div class="breadcrumb-dropdown" x-show="hasHiddenItems">
    <div class="dropdown">
      <button class="btn btn-link btn-sm p-0" 
              data-bs-toggle="dropdown" 
              aria-expanded="false">
        <i class="bi bi-three-dots"></i>
      </button>
      <ul class="dropdown-menu">
        <template x-for="item in hiddenItems" :key="item.path">
          <li>
            <a class="dropdown-item" 
               :href="item.path" 
               x-text="item.title"></a>
          </li>
        </template>
      </ul>
    </div>
  </div>
</nav>

<script>
Alpine.data('breadcrumb', () => ({
  breadcrumbItems: [],
  maxVisibleItems: 4,
  
  init() {
    this.generateBreadcrumb();
  },
  
  get hasHiddenItems() {
    return this.breadcrumbItems.length > this.maxVisibleItems;
  },
  
  get visibleItems() {
    if (this.breadcrumbItems.length <= this.maxVisibleItems) {
      return this.breadcrumbItems;
    }
    
    return [
      this.breadcrumbItems[0], // ホーム
      ...this.breadcrumbItems.slice(-2) // 最後の2項目
    ];
  },
  
  get hiddenItems() {
    if (this.breadcrumbItems.length <= this.maxVisibleItems) {
      return [];
    }
    
    return this.breadcrumbItems.slice(1, -2);
  },
  
  generateBreadcrumb() {
    const path = window.location.pathname;
    const segments = path.split('/').filter(segment => segment);
    
    // ホームを常に追加
    this.breadcrumbItems = [{
      title: 'ホーム',
      path: '/dashboard'
    }];
    
    // パスセグメントから階層を構築
    let currentPath = '';
    segments.forEach((segment, index) => {
      currentPath += '/' + segment;
      const item = this.getItemFromPath(currentPath);
      if (item) {
        this.breadcrumbItems.push(item);
      }
    });
  },
  
  getItemFromPath(path) {
    // パスから適切なタイトルを取得
    const pathMap = {
      '/engineers': { title: '技術者管理', path: '/engineers' },
      '/engineers/new': { title: '新規登録', path: '/engineers/new' },
      '/engineers/\\d+': { title: '技術者詳細', path: path },
      '/projects': { title: '案件管理', path: '/projects' },
      '/projects/new': { title: '新規案件', path: '/projects/new' },
      // 他のパスマッピング...
    };
    
    for (const pattern in pathMap) {
      const regex = new RegExp('^' + pattern + '$');
      if (regex.test(path)) {
        return pathMap[pattern];
      }
    }
    
    return null;
  }
}));
</script>
```

### 2. 構造化パンくずリスト

#### 2.1 階層型パンくずリスト
```html
<!-- 階層型パンくずリスト -->
<nav aria-label="階層ナビゲーション" class="structured-breadcrumb">
  <div class="breadcrumb-hierarchy">
    <!-- レベル1: メインカテゴリ -->
    <div class="breadcrumb-level">
      <div class="breadcrumb-category">
        <i class="bi bi-people text-primary"></i>
        <span class="fw-medium">技術者管理</span>
      </div>
    </div>
    
    <!-- 区切り -->
    <div class="breadcrumb-separator">
      <i class="bi bi-chevron-right text-muted"></i>
    </div>
    
    <!-- レベル2: サブカテゴリ -->
    <div class="breadcrumb-level">
      <div class="breadcrumb-subcategory">
        <a href="/engineers" class="text-decoration-none">技術者一覧</a>
      </div>
    </div>
    
    <!-- 区切り -->
    <div class="breadcrumb-separator">
      <i class="bi bi-chevron-right text-muted"></i>
    </div>
    
    <!-- レベル3: 詳細 -->
    <div class="breadcrumb-level">
      <div class="breadcrumb-detail">
        <span class="text-muted">田中太郎</span>
      </div>
    </div>
  </div>
  
  <!-- アクションボタン -->
  <div class="breadcrumb-actions">
    <button class="btn btn-outline-secondary btn-sm" onclick="history.back()">
      <i class="bi bi-arrow-left me-1"></i>戻る
    </button>
  </div>
</nav>
```

## ページネーション

### 1. 基本ページネーション

#### 1.1 標準ページネーション
```html
<!-- 標準ページネーション -->
<nav aria-label="ページネーション" class="pagination-container">
  <div class="d-flex justify-content-between align-items-center">
    <!-- 情報表示 -->
    <div class="pagination-info">
      <span class="text-muted">
        全245件中 21-40件を表示
      </span>
    </div>
    
    <!-- ページネーション -->
    <ul class="pagination mb-0">
      <li class="page-item">
        <a class="page-link" href="?page=1" aria-label="最初のページ">
          <i class="bi bi-chevron-double-left"></i>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page=1" aria-label="前のページ">
          <i class="bi bi-chevron-left"></i>
        </a>
      </li>
      <li class="page-item"><a class="page-link" href="?page=1">1</a></li>
      <li class="page-item active" aria-current="page">
        <span class="page-link">2</span>
      </li>
      <li class="page-item"><a class="page-link" href="?page=3">3</a></li>
      <li class="page-item"><a class="page-link" href="?page=4">4</a></li>
      <li class="page-item"><a class="page-link" href="?page=5">5</a></li>
      <li class="page-item disabled">
        <span class="page-link">...</span>
      </li>
      <li class="page-item"><a class="page-link" href="?page=13">13</a></li>
      <li class="page-item">
        <a class="page-link" href="?page=3" aria-label="次のページ">
          <i class="bi bi-chevron-right"></i>
        </a>
      </li>
      <li class="page-item">
        <a class="page-link" href="?page=13" aria-label="最後のページ">
          <i class="bi bi-chevron-double-right"></i>
        </a>
      </li>
    </ul>
    
    <!-- ページサイズ選択 -->
    <div class="pagination-size">
      <select class="form-select form-select-sm" style="width: auto;">
        <option value="20" selected>20件</option>
        <option value="50">50件</option>
        <option value="100">100件</option>
      </select>
    </div>
  </div>
</nav>
```

#### 1.2 高機能ページネーション
```html
<!-- 高機能ページネーション -->
<nav aria-label="ページネーション" class="advanced-pagination" x-data="pagination">
  <div class="pagination-container">
    <div class="row align-items-center">
      <!-- 左側: 情報表示 -->
      <div class="col-md-4">
        <div class="pagination-info">
          <span class="text-muted">
            全<span x-text="totalItems"></span>件中 
            <span x-text="startIndex"></span>-<span x-text="endIndex"></span>件を表示
          </span>
        </div>
      </div>
      
      <!-- 中央: ページネーション -->
      <div class="col-md-4">
        <ul class="pagination justify-content-center mb-0">
          <!-- 最初/前のページ -->
          <li class="page-item" :class="{ disabled: currentPage === 1 }">
            <button class="page-link" 
                    @click="goToPage(1)"
                    :disabled="currentPage === 1"
                    aria-label="最初のページ">
              <i class="bi bi-chevron-double-left"></i>
            </button>
          </li>
          <li class="page-item" :class="{ disabled: currentPage === 1 }">
            <button class="page-link" 
                    @click="goToPage(currentPage - 1)"
                    :disabled="currentPage === 1"
                    aria-label="前のページ">
              <i class="bi bi-chevron-left"></i>
            </button>
          </li>
          
          <!-- ページ番号 -->
          <template x-for="page in visiblePages" :key="page">
            <li class="page-item" :class="{ active: page === currentPage }">
              <template x-if="page === '...'">
                <span class="page-link">...</span>
              </template>
              <template x-if="page !== '...'">
                <button class="page-link" 
                        @click="goToPage(page)"
                        x-text="page"
                        :aria-current="page === currentPage ? 'page' : null"></button>
              </template>
            </li>
          </template>
          
          <!-- 次/最後のページ -->
          <li class="page-item" :class="{ disabled: currentPage === totalPages }">
            <button class="page-link" 
                    @click="goToPage(currentPage + 1)"
                    :disabled="currentPage === totalPages"
                    aria-label="次のページ">
              <i class="bi bi-chevron-right"></i>
            </button>
          </li>
          <li class="page-item" :class="{ disabled: currentPage === totalPages }">
            <button class="page-link" 
                    @click="goToPage(totalPages)"
                    :disabled="currentPage === totalPages"
                    aria-label="最後のページ">
              <i class="bi bi-chevron-double-right"></i>
            </button>
          </li>
        </ul>
      </div>
      
      <!-- 右側: コントロール -->
      <div class="col-md-4">
        <div class="d-flex justify-content-end align-items-center gap-2">
          <!-- ページジャンプ -->
          <div class="page-jump">
            <div class="input-group input-group-sm">
              <input type="number" 
                     class="form-control" 
                     :min="1" 
                     :max="totalPages"
                     x-model="jumpPage"
                     @keyup.enter="goToPage(jumpPage)"
                     placeholder="ページ番号">
              <button class="btn btn-outline-secondary" 
                      @click="goToPage(jumpPage)">
                移動
              </button>
            </div>
          </div>
          
          <!-- ページサイズ -->
          <select class="form-select form-select-sm" 
                  style="width: auto;"
                  x-model="pageSize"
                  @change="changePageSize()">
            <option value="10">10件</option>
            <option value="25">25件</option>
            <option value="50">50件</option>
            <option value="100">100件</option>
          </select>
        </div>
      </div>
    </div>
  </div>
</nav>

<script>
Alpine.data('pagination', () => ({
  currentPage: 1,
  totalPages: 13,
  totalItems: 245,
  pageSize: 20,
  jumpPage: '',
  
  get startIndex() {
    return (this.currentPage - 1) * this.pageSize + 1;
  },
  
  get endIndex() {
    return Math.min(this.currentPage * this.pageSize, this.totalItems);
  },
  
  get visiblePages() {
    const pages = [];
    const delta = 2; // 現在ページの前後に表示するページ数
    
    // 最初のページは常に表示
    if (this.currentPage > delta + 2) {
      pages.push(1);
      if (this.currentPage > delta + 3) {
        pages.push('...');
      }
    }
    
    // 現在ページ周辺のページ
    const start = Math.max(1, this.currentPage - delta);
    const end = Math.min(this.totalPages, this.currentPage + delta);
    
    for (let i = start; i <= end; i++) {
      pages.push(i);
    }
    
    // 最後のページ
    if (this.currentPage < this.totalPages - delta - 1) {
      if (this.currentPage < this.totalPages - delta - 2) {
        pages.push('...');
      }
      pages.push(this.totalPages);
    }
    
    return pages;
  },
  
  goToPage(page) {
    if (page >= 1 && page <= this.totalPages && page !== this.currentPage) {
      this.currentPage = page;
      this.jumpPage = '';
      this.loadData();
    }
  },
  
  changePageSize() {
    this.currentPage = 1;
    this.totalPages = Math.ceil(this.totalItems / this.pageSize);
    this.loadData();
  },
  
  loadData() {
    // データ読み込み処理
    console.log(`ページ: ${this.currentPage}, サイズ: ${this.pageSize}`);
  }
}));
</script>
```

### 2. モバイル対応ページネーション

#### 2.1 簡略ページネーション
```html
<!-- モバイル用簡略ページネーション -->
<nav aria-label="ページネーション" class="mobile-pagination d-md-none">
  <div class="d-flex justify-content-between align-items-center">
    <button class="btn btn-outline-secondary" 
            :disabled="currentPage === 1"
            @click="goToPage(currentPage - 1)">
      <i class="bi bi-chevron-left me-1"></i>前へ
    </button>
    
    <span class="pagination-current">
      <span x-text="currentPage"></span> / <span x-text="totalPages"></span>
    </span>
    
    <button class="btn btn-outline-secondary" 
            :disabled="currentPage === totalPages"
            @click="goToPage(currentPage + 1)">
      次へ<i class="bi bi-chevron-right ms-1"></i>
    </button>
  </div>
</nav>
```

## タブナビゲーション

### 1. 基本タブ

#### 1.1 標準タブ
```html
<!-- 基本タブナビゲーション -->
<div class="tab-navigation">
  <ul class="nav nav-tabs" id="engineerTabs" role="tablist">
    <li class="nav-item" role="presentation">
      <button class="nav-link active" 
              id="basic-tab" 
              data-bs-toggle="tab" 
              data-bs-target="#basic" 
              type="button" 
              role="tab" 
              aria-controls="basic" 
              aria-selected="true">
        <i class="bi bi-person me-1"></i>基本情報
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" 
              id="skills-tab" 
              data-bs-toggle="tab" 
              data-bs-target="#skills" 
              type="button" 
              role="tab" 
              aria-controls="skills" 
              aria-selected="false">
        <i class="bi bi-gear me-1"></i>スキル
        <span class="badge bg-primary ms-1">5</span>
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" 
              id="projects-tab" 
              data-bs-toggle="tab" 
              data-bs-target="#projects" 
              type="button" 
              role="tab" 
              aria-controls="projects" 
              aria-selected="false">
        <i class="bi bi-briefcase me-1"></i>案件履歴
      </button>
    </li>
    <li class="nav-item" role="presentation">
      <button class="nav-link" 
              id="documents-tab" 
              data-bs-toggle="tab" 
              data-bs-target="#documents" 
              type="button" 
              role="tab" 
              aria-controls="documents" 
              aria-selected="false">
        <i class="bi bi-file-text me-1"></i>書類
      </button>
    </li>
  </ul>
  
  <div class="tab-content" id="engineerTabContent">
    <div class="tab-pane fade show active" 
         id="basic" 
         role="tabpanel" 
         aria-labelledby="basic-tab">
      <!-- 基本情報コンテンツ -->
    </div>
    <div class="tab-pane fade" 
         id="skills" 
         role="tabpanel" 
         aria-labelledby="skills-tab">
      <!-- スキルコンテンツ -->
    </div>
    <!-- 他のタブコンテンツ... -->
  </div>
</div>
```

#### 1.2 動的タブ
```html
<!-- 動的タブナビゲーション -->
<div class="dynamic-tabs" x-data="tabNavigation">
  <!-- タブヘッダー -->
  <div class="tab-header">
    <ul class="nav nav-tabs" role="tablist">
      <template x-for="(tab, index) in tabs" :key="tab.id">
        <li class="nav-item" role="presentation">
          <button class="nav-link" 
                  :class="{ active: activeTab === tab.id }"
                  @click="switchTab(tab.id)"
                  type="button" 
                  role="tab"
                  :aria-controls="tab.id"
                  :aria-selected="activeTab === tab.id">
            <i :class="tab.icon + ' me-1'"></i>
            <span x-text="tab.title"></span>
            
            <!-- バッジ表示 -->
            <span x-show="tab.badge" 
                  class="badge bg-primary ms-1" 
                  x-text="tab.badge"></span>
            
            <!-- ローディングインジケーター -->
            <div x-show="tab.loading" 
                 class="spinner-border spinner-border-sm ms-1" 
                 role="status">
              <span class="visually-hidden">読み込み中...</span>
            </div>
            
            <!-- 閉じるボタン（動的タブのみ） -->
            <button x-show="tab.closable" 
                    class="btn-close btn-close-sm ms-2" 
                    @click.stop="closeTab(tab.id)"
                    aria-label="タブを閉じる"></button>
          </button>
        </li>
      </template>
      
      <!-- 新しいタブボタン -->
      <li class="nav-item">
        <button class="nav-link" 
                @click="addNewTab()"
                title="新しいタブを追加">
          <i class="bi bi-plus"></i>
        </button>
      </li>
    </ul>
  </div>
  
  <!-- タブコンテンツ -->
  <div class="tab-content">
    <template x-for="tab in tabs" :key="tab.id">
      <div class="tab-pane fade" 
           :class="{ 'show active': activeTab === tab.id }"
           :id="tab.id" 
           role="tabpanel">
        
        <!-- ローディング状態 -->
        <div x-show="tab.loading" class="text-center py-4">
          <div class="spinner-border" role="status">
            <span class="visually-hidden">読み込み中...</span>
          </div>
          <div class="mt-2">データを読み込んでいます...</div>
        </div>
        
        <!-- エラー状態 -->
        <div x-show="tab.error" class="alert alert-danger">
          <i class="bi bi-exclamation-triangle me-2"></i>
          <span x-text="tab.errorMessage"></span>
          <button class="btn btn-outline-danger btn-sm ms-2" 
                  @click="reloadTab(tab.id)">
            再読み込み
          </button>
        </div>
        
        <!-- コンテンツ -->
        <div x-show="!tab.loading && !tab.error" 
             x-html="tab.content">
        </div>
      </div>
    </template>
  </div>
</div>

<script>
Alpine.data('tabNavigation', () => ({
  tabs: [
    {
      id: 'basic',
      title: '基本情報',
      icon: 'bi bi-person',
      content: '<p>基本情報の内容</p>',
      loading: false,
      error: false,
      closable: false
    },
    {
      id: 'skills',
      title: 'スキル',
      icon: 'bi bi-gear',
      badge: 5,
      content: '<p>スキル情報の内容</p>',
      loading: false,
      error: false,
      closable: false
    }
  ],
  activeTab: 'basic',
  
  switchTab(tabId) {
    const tab = this.tabs.find(t => t.id === tabId);
    if (tab && !tab.loading) {
      this.activeTab = tabId;
      this.loadTabContent(tab);
    }
  },
  
  async loadTabContent(tab) {
    if (tab.content || tab.loading) return;
    
    tab.loading = true;
    tab.error = false;
    
    try {
      // コンテンツを動的に読み込み
      const response = await fetch(`/api/tabs/${tab.id}`);
      if (response.ok) {
        tab.content = await response.text();
      } else {
        throw new Error('データの読み込みに失敗しました');
      }
    } catch (error) {
      tab.error = true;
      tab.errorMessage = error.message;
    } finally {
      tab.loading = false;
    }
  },
  
  closeTab(tabId) {
    const index = this.tabs.findIndex(t => t.id === tabId);
    if (index > -1 && this.tabs[index].closable) {
      this.tabs.splice(index, 1);
      
      // アクティブタブが閉じられた場合、別のタブをアクティブに
      if (this.activeTab === tabId && this.tabs.length > 0) {
        this.activeTab = this.tabs[0].id;
      }
    }
  },
  
  addNewTab() {
    const newTabId = 'tab-' + Date.now();
    this.tabs.push({
      id: newTabId,
      title: '新しいタブ',
      icon: 'bi bi-file-plus',
      content: '<p>新しいタブの内容</p>',
      loading: false,
      error: false,
      closable: true
    });
    
    this.switchTab(newTabId);
  },
  
  reloadTab(tabId) {
    const tab = this.tabs.find(t => t.id === tabId);
    if (tab) {
      tab.content = '';
      tab.error = false;
      this.loadTabContent(tab);
    }
  }
}));
</script>
```

## アクセシビリティ実装

### 1. キーボードナビゲーション

```javascript
// ナビゲーション用キーボード操作
class NavigationKeyboard {
  constructor() {
    this.setupGlobalShortcuts();
    this.setupMenuNavigation();
    this.setupTabNavigation();
  }
  
  setupGlobalShortcuts() {
    document.addEventListener('keydown', (e) => {
      // Alt + M: メニューを開く/閉じる
      if (e.altKey && e.key === 'm') {
        e.preventDefault();
        this.toggleMenu();
      }
      
      // Alt + H: ホームに戻る
      if (e.altKey && e.key === 'h') {
        e.preventDefault();
        window.location.href = '/dashboard';
      }
      
      // Alt + B: 戻る
      if (e.altKey && e.key === 'b') {
        e.preventDefault();
        history.back();
      }
    });
  }
  
  setupMenuNavigation() {
    const menuItems = document.querySelectorAll('.sidebar .nav-link');
    let currentIndex = -1;
    
    document.addEventListener('keydown', (e) => {
      if (e.target.closest('.sidebar')) {
        switch (e.key) {
          case 'ArrowDown':
            e.preventDefault();
            currentIndex = Math.min(currentIndex + 1, menuItems.length - 1);
            menuItems[currentIndex].focus();
            break;
          case 'ArrowUp':
            e.preventDefault();
            currentIndex = Math.max(currentIndex - 1, 0);
            menuItems[currentIndex].focus();
            break;
          case 'Enter':
          case ' ':
            e.preventDefault();
            e.target.click();
            break;
        }
      }
    });
  }
  
  setupTabNavigation() {
    document.addEventListener('keydown', (e) => {
      // Ctrl + Tab: 次のタブ
      if (e.ctrlKey && e.key === 'Tab' && !e.shiftKey) {
        e.preventDefault();
        this.switchToNextTab();
      }
      
      // Ctrl + Shift + Tab: 前のタブ
      if (e.ctrlKey && e.key === 'Tab' && e.shiftKey) {
        e.preventDefault();
        this.switchToPrevTab();
      }
    });
  }
  
  toggleMenu() {
    const sidebar = document.querySelector('.sidebar');
    const mobileNav = document.querySelector('#mobileNavbar');
    
    if (window.innerWidth < 768 && mobileNav) {
      const offcanvas = new bootstrap.Offcanvas(mobileNav);
      offcanvas.toggle();
    } else if (sidebar) {
      sidebar.classList.toggle('collapsed');
    }
  }
  
  switchToNextTab() {
    const tabs = document.querySelectorAll('.nav-tabs .nav-link');
    const activeTab = document.querySelector('.nav-tabs .nav-link.active');
    
    if (tabs.length > 0 && activeTab) {
      const currentIndex = Array.from(tabs).indexOf(activeTab);
      const nextIndex = (currentIndex + 1) % tabs.length;
      tabs[nextIndex].click();
    }
  }
  
  switchToPrevTab() {
    const tabs = document.querySelectorAll('.nav-tabs .nav-link');
    const activeTab = document.querySelector('.nav-tabs .nav-link.active');
    
    if (tabs.length > 0 && activeTab) {
      const currentIndex = Array.from(tabs).indexOf(activeTab);
      const prevIndex = currentIndex === 0 ? tabs.length - 1 : currentIndex - 1;
      tabs[prevIndex].click();
    }
  }
}

// 初期化
document.addEventListener('DOMContentLoaded', () => {
  new NavigationKeyboard();
});
```

### 2. スクリーンリーダー対応

```html
<!-- ARIA landmarks とラベル -->
<nav role="navigation" aria-label="メインナビゲーション" class="sidebar">
  <!-- ナビゲーション内容 -->
</nav>

<nav role="navigation" aria-label="パンくずナビゲーション" class="breadcrumb-container">
  <!-- パンくず内容 -->
</nav>

<nav role="navigation" aria-label="ページネーション" class="pagination-container">
  <!-- ページネーション内容 -->
</nav>

<!-- ライブリージョンでの動的更新通知 -->
<div aria-live="polite" 
     aria-atomic="true" 
     class="visually-hidden" 
     id="navigation-announcer"></div>

<script>
// ナビゲーション変更の音声案内
function announceNavigation(message) {
  const announcer = document.getElementById('navigation-announcer');
  if (announcer) {
    announcer.textContent = message;
    setTimeout(() => {
      announcer.textContent = '';
    }, 1000);
  }
}

// 使用例
document.addEventListener('DOMContentLoaded', () => {
  // ページ変更時
  const observer = new MutationObserver(() => {
    const activeMenuItem = document.querySelector('.nav-link.active');
    if (activeMenuItem) {
      announceNavigation(`${activeMenuItem.textContent} ページに移動しました`);
    }
  });
  
  observer.observe(document.body, {
    subtree: true,
    attributes: true,
    attributeFilter: ['class']
  });
});
</script>
```

## スタイル設計

### 1. CSS変数

```css
:root {
  /* ナビゲーション固有色 */
  --nav-bg: #f8f9fa;
  --nav-border: #dee2e6;
  --nav-link-color: #495057;
  --nav-link-hover-color: #0d6efd;
  --nav-link-active-bg: #e9ecef;
  --nav-link-active-color: #0d6efd;
  
  /* サイドバー */
  --sidebar-width: 280px;
  --sidebar-collapsed-width: 60px;
  --sidebar-bg: var(--nav-bg);
  --sidebar-border: var(--nav-border);
  
  /* パンくず */
  --breadcrumb-divider: '>';
  --breadcrumb-divider-color: #6c757d;
  
  /* ページネーション */
  --pagination-color: #495057;
  --pagination-bg: #fff;
  --pagination-border-color: #dee2e6;
  --pagination-hover-color: #0056b3;
  --pagination-hover-bg: #e9ecef;
  --pagination-active-color: #fff;
  --pagination-active-bg: #0d6efd;
}
```

### 2. レスポンシブCSS

```css
/* サイドバーレスポンシブ */
.sidebar {
  width: var(--sidebar-width);
  height: 100vh;
  background: var(--sidebar-bg);
  border-right: 1px solid var(--sidebar-border);
  transition: all 0.3s ease;
}

/* タブレット: 折りたたみ */
@media (min-width: 768px) and (max-width: 1023px) {
  .sidebar-collapsed {
    width: var(--sidebar-collapsed-width);
  }
  
  .sidebar-collapsed .nav-text,
  .sidebar-collapsed .sidebar-title {
    display: none;
  }
  
  .sidebar-collapsed .nav-link {
    justify-content: center;
    padding: 0.75rem;
  }
}

/* モバイル: 非表示 */
@media (max-width: 767px) {
  .sidebar {
    display: none;
  }
  
  .main-content {
    margin-left: 0 !important;
  }
}

/* パンくずレスポンシブ */
@media (max-width: 576px) {
  .breadcrumb-item:not(:last-child):not(:first-child) {
    display: none;
  }
  
  .breadcrumb-item:first-child::after {
    content: ' ... ';
  }
}

/* ページネーションレスポンシブ */
@media (max-width: 576px) {
  .pagination .page-item:not(.page-item-nav) {
    display: none;
  }
  
  .pagination-info {
    font-size: 0.875rem;
  }
  
  .pagination-size {
    display: none;
  }
}
```

## 実装ガイドライン

### 1. 品質チェックリスト

#### ナビゲーション品質チェック
- [ ] 論理的なメニュー階層が設計されている
- [ ] 現在位置が明確に表示される
- [ ] キーボードのみで操作できる
- [ ] スクリーンリーダーで適切に読み上げられる
- [ ] モバイルデバイスで操作しやすい
- [ ] レスポンシブ対応ができている
- [ ] ページ読み込み速度が良い
- [ ] 検索機能が提供されている
- [ ] お気に入り・履歴機能がある（オプション）

#### アクセシビリティチェック
- [ ] 適切なARIA属性が設定されている
- [ ] ランドマーク役割が定義されている
- [ ] フォーカス表示が明確
- [ ] コントラスト比が基準を満たしている
- [ ] キーボードショートカットが提供されている

---

**作成者**: システム化プロジェクトチーム  
**作成日**: 2025年6月1日  
**バージョン**: 1.0